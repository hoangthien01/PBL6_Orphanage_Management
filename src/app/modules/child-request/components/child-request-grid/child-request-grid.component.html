<dx-load-panel
    *ngIf="false"
    [visible]="false"
    shadingColor="#ffffffcc"
    [showIndicator]="true"
    [showPane]="true"
    [shading]="true">
</dx-load-panel>
<!-- <app-account-search (onSearchAction)="onSearchLocation($event)"></app-account-search> -->

<dx-data-grid
    id="gridContainer"
    [dataSource]="dataSource"
    [columnHidingEnabled]="false"
    [showBorders]="true"
    [showRowLines]="true"
    [showColumnLines]="false"
    [hoverStateEnabled]="true"
    [rowAlternationEnabled]="false"
    class="location-data-grid-container">
    <dxo-paging [pageSize]="10"></dxo-paging>
    <dx-load-panel [visible]="false"></dx-load-panel>
    <dxo-pager
        [showInfo]="true"
        [showPageSizeSelector]="true"
        [allowedPageSizes]="[10, 20]"
        [showNavigationButtons]="true">
    </dxo-pager>
    <dxo-remote-operations [filtering]="true" [sorting]="true" [paging]="true"></dxo-remote-operations>
    <!-- *ngIf="status === locationStatus.Active" -->
    <dxi-column
        dataField="adopter_name"
        [caption]="'Người nhận nuôi'"
        [allowSorting]="false"
        class="text-dark column-header">
    </dxi-column>
    <!-- *ngIf="status === locationStatus.Pending" -->
    <dxi-column
        dataField="children.name"
        [caption]="'Trẻ nhận nuôi'"
        [allowSorting]="false"
        class="text-dark column-header">
    </dxi-column>
    <!-- *ngIf="status === locationStatus.Active" -->
    <dxi-column
        dataField="created_at"
        [allowSorting]="false"
        caption="Thời gian tạo"
        class="column-header"
        cellTemplate="dateCellTemplate">
        <div *dxTemplate="let cell of 'dateCellTemplate'">
            {{ cell.data.created_at | date: 'M/d/yyyy' }}
        </div>
    </dxi-column>
    <!-- *ngIf="status === locationStatus.Active" -->
    <dxi-column
        dataField="approver"
        [allowSorting]="false"
        [caption]="'Người xác nhận'"
        class="text-dark column-header">
    </dxi-column>
    <!-- *ngIf="status === locationStatus.Active" -->
    <dxi-column
        dataField="status"
        [allowSorting]="false"
        [caption]="'Trạng thái'"
        class="text-dark column-header">
    </dxi-column>
    <!-- *ngIf="status === locationStatus.Active" -->
    <!-- <dxi-column
        [width]="60"
        [fixed]="true"
        alignment="center"
        cellTemplate="actionsCellTemplate"
        fixedPosition="right"
        [caption]="''"
        class="column-header">
        <div *dxTemplate="let cell of 'actionsCellTemplate'">
            <div class="option-button" (click)="editAdditionalLocation(cell.data.id, $event)">Edit</div>
        </div>
    </dxi-column> -->
    <!-- *ngIf="status === locationStatus.Pending" -->
    <dxi-column
        [width]="230"
        [fixed]="true"
        alignment="left"
        cellTemplate="actionsCellTemplate"
        fixedPosition="right"
        [caption]="''">
        <div *dxTemplate="let cell of 'actionsCellTemplate'">
            <div class="btn-group">
                <dx-button
                    *ngIf="status === requestStatus.Pending"
                    [ngClass]="'mx-4-c'"
                    [focusStateEnabled]="false"
                    type="default"
                    text="Approve"
                    (onClick)="openApproveRequestPopup(cell.data.id)">
                </dx-button>
                <dx-button
                    *ngIf="status === requestStatus.Pending"
                    [ngClass]="'mx-4-c puzzle-btn'"
                    [focusStateEnabled]="false"
                    text="Reject "
                    (onClick)="openRejectRequestPopup(cell.data.id)">
                </dx-button>
            </div>
            <div class="btn-group">
                <dx-button
                    *ngIf="status === requestStatus.Active"
                    [ngClass]="'mx-2 puzzle-btn'"
                    [focusStateEnabled]="false"
                    text="Cancel Invite "
                    (onClick)="openCancelInvitePopup(cell.data.id)">
                </dx-button>
            </div>
            <div class="btn-group">
                <dx-button
                    *ngIf="status === requestStatus.Inactive"
                    [ngClass]="'mx-2 puzzle-btn'"
                    [focusStateEnabled]="false"
                    text="Active "
                    (onClick)="openCancelInvitePopup(cell.data.id)">
                </dx-button>
            </div>
        </div>
    </dxi-column>
</dx-data-grid>

<ng-container *ngIf="isApprovePopup">
  <app-popup-confirmation confirmButtonTitle="Yes" cancelButtonTitle="Cancel" (onConfirm)="onApproveRequest($event)">
    <p>Are you sure that you want to approve this organization access request?  You cannot undo this action.</p>
  </app-popup-confirmation>
</ng-container>

<ng-container *ngIf="isRejectPopup">
    <app-popup-confirmation confirmButtonTitle="Yes" cancelButtonTitle="Cancel" (onConfirm)="onRejectRequest($event)">
        <p>Are you sure that you want to reject  this organization access request ? You cannot undo this action.</p>
    </app-popup-confirmation>
</ng-container>

<ng-container *ngIf="isCancelPopup">
    <app-popup-confirmation confirmButtonTitle="Yes" cancelButtonTitle="Cancel" (onConfirm)="onCancelInvite($event)">
        <p>Are you sure that you want to cancel invite this organization?  You cannot undo this action.</p>
    </app-popup-confirmation>
</ng-container>
